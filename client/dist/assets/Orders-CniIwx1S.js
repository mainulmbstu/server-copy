import{r as a,u as N,j as s,U as v,h as f,B as x}from"./index-DFCu50re.js";import{h as m}from"./moment-C5S46NFB.js";const A=()=>{let[w,d]=a.useState(!1),[c,i]=a.useState([]),{token:l}=N(),j=async()=>{try{await d(!0);let{data:e}=await f.get("https://mernecom-server.onrender.com/user/orders",{headers:{Authorization:`Bearer ${l}`}});e.success?(x.success(e.msg),i(e.orders),d(!1)):x.error(e.msg)}catch(e){console.log({msg:"getUserOrders",error:e})}};return a.useEffect(()=>{l&&j()},[l]),s.jsxs("div",{className:"row ",children:[s.jsx("div",{className:"col-sm-3 p-2",children:s.jsx("div",{className:"card p-2",children:s.jsx(v,{})})}),s.jsxs("div",{className:" col-sm-9 p-2",children:[s.jsx("div",{className:" card p-2 text-center",children:s.jsxs("h2",{children:["All orders (",c==null?void 0:c.length,")"]})}),s.jsx("div",{className:"row ",children:c==null?void 0:c.map((e,u)=>{var n,h;return s.jsxs("div",{className:" mt-5 shadow",children:[s.jsxs("table",{className:"table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:"#"}),s.jsx("th",{scope:"col",children:"Status"}),s.jsx("th",{scope:"col",children:"Payment"}),s.jsx("th",{scope:"col",children:"Qnty"}),s.jsx("th",{scope:"col",children:"Total Price"}),s.jsx("th",{scope:"col",children:"Time"})]})}),s.jsx("tbody",{children:s.jsxs("tr",{children:[s.jsxs("td",{children:[u+1," "]}),s.jsxs("td",{children:[e==null?void 0:e.status," "]}),s.jsxs("td",{children:[(n=e==null?void 0:e.payment)!=null&&n.status?"Success":"Failed"," "]}),s.jsxs("td",{children:[e==null?void 0:e.products.length," "]}),s.jsxs("td",{children:[e==null?void 0:e.total," "]}),s.jsxs("td",{children:[m(e==null?void 0:e.createdAt).fromNow()," "]})]})})]}),(h=e==null?void 0:e.products)==null?void 0:h.map((r,g)=>{var o,t;return s.jsx("div",{className:"row g-5",children:s.jsxs("div",{className:"row g-4",children:[s.jsx("div",{className:" col-sm-6",children:s.jsx("img",{src:`${(o=r==null?void 0:r.picture)==null?void 0:o.secure_url}`,className:" ms-3",width:100,height:100,alt:"image"})}),s.jsx("div",{className:" col-sm-6 d-flex flex-column",children:s.jsxs("div",{children:[s.jsxs("h5",{children:["Name: ",r==null?void 0:r.name," "]}),s.jsxs("p",{children:["Category: ",(t=r==null?void 0:r.category)==null?void 0:t.name," "]}),s.jsxs("p",{children:["Price: ",r==null?void 0:r.price," "]})]})})]})},g)})]},e._id)})})]})]})};export{A as default};
